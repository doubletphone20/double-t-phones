<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Double T Phones - Premium Smartphones & Accessoires</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { 
            --primary: #0056b3; 
            --secondary: #343a40; 
            --accent: #17a2b8; 
            --light: #f8f9fa; 
            --dark: #212529; 
            --success: #28a745; 
            --danger: #dc3545; 
        }
        
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background: #f8f9fa; 
        }
        
        .navbar { 
            box-shadow: 0 2px 10px rgba(0,0,0,0.1); 
        }
        
        .hero-carousel .carousel-item img { 
            height: 500px; 
            object-fit: cover; 
        }
        
        .product-card { 
            border: none; 
            border-radius: 10px; 
            transition: transform 0.3s; 
            box-shadow: 0 5px 15px rgba(0,0,0,0.05); 
            height: 100%;
        }
        
        .product-card:hover { 
            transform: translateY(-5px); 
            box-shadow: 0 10px 20px rgba(0,0,0,0.1); 
        }
        
        .product-image { 
            height: 200px; 
            object-fit: cover; 
            width: 100%; 
        }
        
        .price { 
            font-weight: bold; 
            color: var(--primary); 
            font-size: 1.2rem; 
        }
        
        .section-title { 
            position: relative; 
            margin-bottom: 2rem; 
            text-align: center; 
            font-weight: 700; 
        }
        
        .section-title:after { 
            content: ''; 
            display: block; 
            width: 60px; 
            height: 3px; 
            background: var(--primary); 
            margin: 10px auto; 
        }
        
        .whatsapp-float { 
            position: fixed; 
            bottom: 40px; 
            right: 40px; 
            background: #25d366; 
            color: #FFF; 
            border-radius: 50px; 
            width: 60px; 
            height: 60px; 
            text-align: center; 
            font-size: 30px; 
            box-shadow: 2px 2px 3px #999; 
            z-index: 100; 
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .badge-discount { 
            position: absolute; 
            top: 10px; 
            right: 10px; 
            background: var(--success); 
            color: white; 
            padding: 5px 10px; 
            border-radius: 20px; 
            font-size: 0.8rem; 
        }
        
        .badge-new { 
            position: absolute; 
            top: 10px; 
            left: 10px; 
            background: var(--primary); 
            color: white; 
            padding: 5px 10px; 
            border-radius: 20px; 
            font-size: 0.8rem; 
        }
        
        .content-section { 
            display: none; 
        }
        
        #home {
            display: block;
        }
        
        .cart-sidebar { 
            position: fixed; 
            top: 0; 
            right: -400px; 
            width: 400px; 
            height: 100vh; 
            background: white; 
            box-shadow: -5px 0 15px rgba(0,0,0,0.1); 
            z-index: 1050; 
            transition: right 0.3s; 
            padding: 20px; 
            overflow-y: auto; 
        }
        
        .cart-sidebar.open { 
            right: 0; 
        }
        
        .cart-overlay { 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            background: rgba(0,0,0,0.5); 
            z-index: 1040; 
            display: none; 
        }
        
        .cart-overlay.show { 
            display: block; 
        }
        
        .cart-item { 
            display: flex; 
            align-items: center; 
            padding: 10px 0; 
            border-bottom: 1px solid #eee; 
        }
        
        .cart-item-image { 
            width: 60px; 
            height: 60px; 
            object-fit: cover; 
            border-radius: 5px; 
            margin-right: 15px; 
        }
        
        .admin-panel { 
            display: none; 
            min-height: 100vh; 
            background: #e9ecef; 
        }
        
        .login-form { 
            background: white; 
            border-radius: 10px; 
            box-shadow: 0 5px 15px rgba(0,0,0,0.1); 
            padding: 30px; 
        }
        
        @media (max-width: 768px) {
            .cart-sidebar { 
                width: 100%; 
                right: -100%; 
            }
            
            .hero-carousel .carousel-item img { 
                height: 300px; 
            }
            
            .whatsapp-float { 
                bottom: 20px; 
                right: 20px; 
            }
        }
    </style>
</head>
<body>
    <!-- Navigatie -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container">
            <a class="navbar-brand" href="#">
                <i class="fas fa-mobile-alt me-2"></i>DOUBLE T PHONES
            </a>
            <div class="navbar-nav me-auto">
                <a class="nav-link active" href="#" onclick="showSection('home')">Home</a>
                <a class="nav-link" href="#" onclick="showSection('phones')">Telefoons</a>
                <a class="nav-link" href="#" onclick="showSection('accessories')">Accessoires</a>
                <a class="nav-link" href="#" onclick="showSection('about')">Over Ons</a>
                <a class="nav-link" href="#" onclick="showSection('contact')">Contact</a>
            </div>
            <div class="d-flex">
                <a href="#" class="btn btn-outline-primary me-2" onclick="showLoginForm()">
                    <i class="fas fa-user"></i>
                </a>
                <a href="#" class="btn btn-outline-primary position-relative" onclick="openCart()">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" id="cartCount">0</span>
                </a>
            </div>
        </div>
    </nav>

    <!-- Home -->
    <section id="home" class="content-section">
        <!-- Hero Carousel -->
        <div id="heroCarousel" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img src="https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1200&q=80" class="d-block w-100" alt="Smartphones">
                    <div class="carousel-caption d-none d-md-block">
                        <h1 class="display-4 fw-bold">Premium Smartphones</h1>
                        <a href="#" class="btn btn-primary btn-lg" onclick="showSection('phones')">Shop Nu</a>
                    </div>
                </div>
            </div>
        </div>

        <div class="container mt-4">
            <h2 class="section-title">Uitgelichte Producten</h2>
            <div class="row" id="featured-products">
                <!-- Producten worden hier geladen -->
            </div>
        </div>
    </section>

    <!-- Telefoons -->
    <section id="phones" class="content-section">
        <div class="container mt-4">
            <h2 class="section-title">Telefoons</h2>
            <div class="row" id="phone-products">
                <!-- Telefoons worden hier geladen -->
            </div>
        </div>
    </section>

    <!-- Accessoires -->
    <section id="accessories" class="content-section">
        <div class="container mt-4">
            <h2 class="section-title">Accessoires</h2>
            <div class="row" id="accessory-products">
                <!-- Accessoires worden hier geladen -->
            </div>
        </div>
    </section>

    <!-- Over Ons -->
    <section id="about" class="content-section">
        <div class="container mt-4">
            <h2 class="section-title">Over Double T Phones</h2>
            <p>Double T Phones biedt premium smartphones en accessoires in Suriname.</p>
        </div>
    </section>

    <!-- Contact -->
    <section id="contact" class="content-section">
        <div class="container mt-4">
            <h2 class="section-title">Contact</h2>
            <p><i class="fas fa-map-marker-alt"></i> Paramaribo, Suriname</p>
            <p><i class="fas fa-phone"></i> +597 123 4567</p>
        </div>
    </section>

    <!-- Login -->
    <section id="login" class="content-section">
        <div class="container mt-4">
            <div class="row justify-content-center">
                <div class="col-md-6">
                    <div class="login-form">
                        <h2 class="section-title">Inloggen</h2>
                        <form id="loginForm">
                            <div class="mb-3">
                                <label for="login-username" class="form-label">Gebruikersnaam</label>
                                <input type="text" class="form-control" id="login-username" required>
                            </div>
                            <div class="mb-3">
                                <label for="login-password" class="form-label">Wachtwoord</label>
                                <input type="password" class="form-control" id="login-password" required>
                            </div>
                            <button type="submit" class="btn btn-primary w-100">Inloggen</button>
                        </form>
                        <p class="mt-3 text-center">
                            Admin login: admin / doublet2024
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Checkout -->
    <section id="checkout" class="content-section">
        <div class="container mt-4">
            <h2 class="section-title">Afrekenen</h2>
            <div class="row">
                <div class="col-md-8">
                    <div class="card p-4">
                        <h4>Leveringsinformatie</h4>
                        <form id="checkoutForm">
                            <div class="mb-3">
                                <label for="checkout-name" class="form-label">Volledige Naam</label>
                                <input type="text" class="form-control" id="checkout-name" required>
                            </div>
                            <div class="mb-3">
                                <label for="checkout-address" class="form-label">Adres</label>
                                <input type="text" class="form-control" id="checkout-address" required>
                            </div>
                            <div class="mb-3">
                                <label for="checkout-delivery" class="form-label">Leveringsmethode</label>
                                <select id="checkout-delivery" class="form-select">
                                    <option value="pickup">Afhalen in Paramaribo</option>
                                    <option value="delivery">Bezorging in Suriname</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="checkout-payment" class="form-label">Betaalmethode</label>
                                <select id="checkout-payment" class="form-select">
                                    <option value="cash">Contant bij levering</option>
                                    <option value="bank">Bankoverschrijving</option>
                                </select>
                            </div>
                            <button type="submit" class="btn btn-primary w-100">Bestelling Plaatsen</button>
                        </form>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card p-4">
                        <h4>Besteloverzicht</h4>
                        <div id="checkout-items"></div>
                        <hr>
                        <p><strong>Subtotaal:</strong> €<span id="checkout-subtotal">0</span></p>
                        <p><strong>Verzendkosten:</strong> €<span id="checkout-shipping">0</span></p>
                        <p><strong>Totaal:</strong> €<span id="checkout-total">0</span></p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Admin Panel -->
    <section id="admin-panel" class="admin-panel">
        <div class="container mt-4">
            <h2 class="section-title">Admin Dashboard</h2>
            <div class="mb-3">
                <button class="btn btn-primary" onclick="showAdminSection('products')">Producten Beheren</button>
                <button class="btn btn-secondary" onclick="logout()">Uitloggen</button>
            </div>
            
            <div id="admin-products" style="display: none;">
                <h3>Producten Beheren</h3>
                <button class="btn btn-success mb-3" onclick="showAddProductForm()">Nieuw Product Toevoegen</button>
                
                <div id="add-product-form" style="display: none;" class="card p-4 mb-4">
                    <h4>Nieuw Product Toevoegen</h4>
                    <form id="newProductForm">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="product-name" class="form-label">Naam</label>
                                    <input type="text" class="form-control" id="product-name" required>
                                </div>
                                <div class="mb-3">
                                    <label for="product-type" class="form-label">Type</label>
                                    <select id="product-type" class="form-select" required>
                                        <option value="phone">Telefoon</option>
                                        <option value="accessory">Accessoire</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label for="product-price" class="form-label">Prijs (€)</label>
                                    <input type="number" class="form-control" id="product-price" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="product-stock" class="form-label">Voorraad</label>
                                    <input type="number" class="form-control" id="product-stock" required>
                                </div>
                                <div class="mb-3">
                                    <label for="product-image" class="form-label">Afbeelding URL</label>
                                    <input type="text" class="form-control" id="product-image">
                                </div>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary">Product Toevoegen</button>
                        <button type="button" class="btn btn-secondary" onclick="hideAddProductForm()">Annuleren</button>
                    </form>
                </div>
                
                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Naam</th>
                                <th>Type</th>
                                <th>Prijs</th>
                                <th>Voorraad</th>
                                <th>Acties</th>
                            </tr>
                        </thead>
                        <tbody id="admin-products-table">
                            <!-- Admin producten worden hier geladen -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </section>

    <!-- Winkelwagen -->
    <div class="cart-overlay" onclick="closeCart()"></div>
    <div class="cart-sidebar">
        <h3>Winkelwagen</h3>
        <div id="cart-items"></div>
        <hr>
        <p><strong>Subtotaal:</strong> €<span id="cart-subtotal">0</span></p>
        <p><strong>Verzendkosten:</strong> €<span id="cart-shipping">0</span></p>
        <p><strong>Totaal:</strong> €<span id="cart-total">0</span></p>
        <button class="btn btn-primary w-100" onclick="proceedToCheckout()">Afrekenen</button>
        <button class="btn btn-secondary w-100 mt-2" onclick="closeCart()">Sluiten</button>
    </div>

    <!-- WhatsApp Knop -->
    <a href="https://wa.me/+5971234567" class="whatsapp-float" target="_blank">
        <i class="fab fa-whatsapp"></i>
    </a>

<script>
// Data initialization
let products = JSON.parse(localStorage.getItem('doublet_products')) || [];
let cart = JSON.parse(localStorage.getItem('doublet_cart')) || [];
let users = JSON.parse(localStorage.getItem('doublet_users')) || [];
let currentUser = JSON.parse(localStorage.getItem('doublet_current_user')) || null;

// Initialize sample data if empty
if (products.length === 0) {
    products = [
        { 
            id: 1, 
            name: "iPhone 15 Pro", 
            type: "phone", 
            brand: "Apple", 
            price: 999, 
            oldPrice: 1099, 
            stock: 10, 
            condition: "Nieuw", 
            image: "https://images.unsplash.com/photo-1695636658398-98f664d2b704?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80", 
            featured: true, 
            discount: 10 
        },
        { 
            id: 2, 
            name: "Samsung Galaxy S24", 
            type: "phone", 
            brand: "Samsung", 
            price: 799, 
            stock: 15, 
            condition: "Nieuw", 
            image: "https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80", 
            featured: true 
        },
        { 
            id: 3, 
            name: "Google Pixel 8", 
            type: "phone", 
            brand: "Google", 
            price: 699, 
            stock: 8, 
            condition: "Nieuw", 
            image: "https://images.unsplash.com/photo-1592750475338-74b7b21085ab?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80", 
            featured: false 
        },
        { 
            id: 4, 
            name: "Hoesje iPhone 15", 
            type: "accessory", 
            category: "Hoesjes", 
            price: 29, 
            stock: 50, 
            image: "https://images.unsplash.com/photo-1583394838336-acd977736f90?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80" 
        },
        { 
            id: 5, 
            name: "Power Bank 10000mAh", 
            type: "accessory", 
            category: "Power Banks", 
            price: 25, 
            stock: 30, 
            image: "https://images.unsplash.com/photo-1609592810795-3350b2fa0b7c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80", 
            featured: true 
        },
        { 
            id: 6, 
            name: "USB-C Oplaadkabel", 
            type: "accessory", 
            category: "Oplaadkabels", 
            price: 15, 
            stock: 100, 
            image: "https://images.unsplash.com/photo-1583394838336-acd977736f90?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80" 
        }
    ];
    localStorage.setItem('doublet_products', JSON.stringify(products));
}

if (users.length === 0) {
    users = [
        { username: "admin", email: "admin@doubletphones.com", password: "doublet2024", role: "admin" }
    ];
    localStorage.setItem('doublet_users', JSON.stringify(users));
}

// Save functions
function saveProducts() {
    localStorage.setItem('doublet_products', JSON.stringify(products));
}

function saveCart() {
    localStorage.setItem('doublet_cart', JSON.stringify(cart));
    updateCartCount();
}

// Navigation
function showSection(sectionId) {
    document.querySelectorAll('.content-section').forEach(section => {
        section.style.display = 'none';
    });
    document.getElementById('admin-panel').style.display = 'none';
    
    document.getElementById(sectionId).style.display = 'block';
    
    if (sectionId === 'home') {
        loadFeaturedProducts();
    } else if (sectionId === 'phones') {
        loadProducts('phone');
    } else if (sectionId === 'accessories') {
        loadProducts('accessory');
    } else if (sectionId === 'checkout') {
        loadCheckout();
    }
}

function showLoginForm() {
    showSection('login');
}

// Product Loading
function loadFeaturedProducts() {
    const featured = products.filter(p => p.featured);
    document.getElementById('featured-products').innerHTML = renderProducts(featured);
}

function loadProducts(type) {
    const filtered = products.filter(p => p.type === type);
    const elementId = type === 'phone' ? 'phone-products' : 'accessory-products';
    document.getElementById(elementId).innerHTML = renderProducts(filtered);
}

function renderProducts(productList) {
    return productList.map(product => `
        <div class="col-md-3 mb-4">
            <div class="product-card card position-relative">
                <img src="${product.image}" class="product-image card-img-top" alt="${product.name}">
                ${product.discount ? `<span class="badge-discount">${product.discount}% Korting</span>` : ''}
                ${product.condition === 'Nieuw' ? `<span class="badge-new">Nieuw</span>` : ''}
                <div class="card-body">
                    <h5 class="card-title">${product.name}</h5>
                    <p class="card-text">${product.brand || product.category || ''}</p>
                    <p class="price">€${product.price}</p>
                    ${product.oldPrice ? `<p class="text-muted"><s>€${product.oldPrice}</s></p>` : ''}
                    <button class="btn btn-primary w-100" onclick="addToCart(${product.id})">
                        In winkelwagen
                    </button>
                </div>
            </div>
        </div>
    `).join('');
}

// Cart Management
function addToCart(productId) {
    const product = products.find(p => p.id === productId);
    if (!product) return;

    if (product.stock <= 0) {
        alert('Product niet op voorraad!');
        return;
    }

    const cartItem = cart.find(item => item.id === productId);
    if (cartItem) {
        cartItem.quantity += 1;
    } else {
        cart.push({ ...product, quantity: 1 });
    }
    
    product.stock -= 1;
    saveCart();
    saveProducts();
    alert('Product toegevoegd aan winkelwagen!');
}

function removeFromCart(productId) {
    const cartItem = cart.find(item => item.id === productId);
    if (cartItem) {
        const product = products.find(p => p.id === productId);
        if (product) {
            product.stock += cartItem.quantity;
        }
    }
    
    cart = cart.filter(item => item.id !== productId);
    saveCart();
    saveProducts();
    updateCartDisplay();
}

function updateCartCount() {
    const count = cart.reduce((total, item) => total + item.quantity, 0);
    document.getElementById('cartCount').textContent = count;
}

function openCart() {
    document.querySelector('.cart-sidebar').classList.add('open');
    document.querySelector('.cart-overlay').classList.add('show');
    updateCartDisplay();
}

function closeCart() {
    document.querySelector('.cart-sidebar').classList.remove('open');
    document.querySelector('.cart-overlay').classList.remove('show');
}

function updateCartDisplay() {
    const cartItems = document.getElementById('cart-items');
    const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
    const shipping = subtotal > 0 ? 5 : 0;
    const total = subtotal + shipping;

    cartItems.innerHTML = cart.length === 0 ? 
        '<p class="text-center">Je winkelwagen is leeg</p>' :
        cart.map(item => `
            <div class="cart-item">
                <img src="${item.image}" class="cart-item-image" alt="${item.name}">
                <div class="flex-grow-1">
                    <h6>${item.name}</h6>
                    <p>€${item.price} x ${item.quantity}</p>
                </div>
                <button class="btn btn-danger btn-sm" onclick="removeFromCart(${item.id})">×</button>
            </div>
        `).join('');

    document.getElementById('cart-subtotal').textContent = subtotal.toFixed(2);
    document.getElementById('cart-shipping').textContent = shipping.toFixed(2);
    document.getElementById('cart-total').textContent = total.toFixed(2);
}

function proceedToCheckout() {
    if (cart.length === 0) {
        alert('Winkelwagen is leeg!');
        return;
    }
    showSection('checkout');
    closeCart();
}

function loadCheckout() {
    const checkoutItems = document.getElementById('checkout-items');
    let subtotal = 0;
    checkoutItems.innerHTML = cart.map(item => {
        subtotal += item.price * item.quantity;
        return `<p>${item.name} x ${item.quantity}: €${(item.price * item.quantity).toFixed(2)}</p>`;
    }).join('');
    
    const deliveryMethod = document.getElementById('checkout-delivery').value;
    const shipping = deliveryMethod === 'delivery' ? 10 : 0;
    const total = subtotal + shipping;
    
    document.getElementById('checkout-subtotal').textContent = subtotal.toFixed(2);
    document.getElementById('checkout-shipping').textContent = shipping.toFixed(2);
    document.getElementById('checkout-total').textContent = total.toFixed(2);
}

// Checkout form submission
document.getElementById('checkoutForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    const total = parseFloat(document.getElementById('checkout-total').textContent);
    const orderNumber = 'DT-' + Math.random().toString(36).substr(2, 9).toUpperCase();
    
    alert(`Bestelling geplaatst!\n\nOrdernummer: ${orderNumber}\nTotaal: €${total.toFixed(2)}\n\nWe nemen contact met je op voor de betaling en levering.`);
    
    // Clear cart
    cart = [];
    saveCart();
    showSection('home');
});

// Login Management
document.getElementById('loginForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const username = document.getElementById('login-username').value;
    const password = document.getElementById('login-password').value;
    
    const user = users.find(u => u.username === username && u.password === password);
    if (user) {
        currentUser = user;
        localStorage.setItem('doublet_current_user', JSON.stringify(user));
        alert('Succesvol ingelogd!');
        if (user.role === 'admin') {
            showAdminPanel();
        } else {
            showSection('home');
        }
    } else {
        alert('Ongeldige inloggegevens!');
    }
});

function showAdminPanel() {
    document.querySelectorAll('.content-section').forEach(section => {
        section.style.display = 'none';
    });
    document.getElementById('admin-panel').style.display = 'block';
    showAdminSection('products');
}

function showAdminSection(section) {
    if (section === 'products') {
        document.getElementById('admin-products').style.display = 'block';
        loadAdminProducts();
    }
}

function logout() {
    currentUser = null;
    localStorage.removeItem('doublet_current_user');
    showSection('home');
}

// Admin Product Management
function loadAdminProducts() {
    document.getElementById('admin-products-table').innerHTML = products.map(p => `
        <tr>
            <td>${p.name}</td>
            <td>${p.type}</td>
            <td>€${p.price}</td>
            <td>${p.stock}</td>
            <td>
                <button class="btn btn-danger btn-sm" onclick="deleteProduct(${p.id})">Verwijderen</button>
            </td>
        </tr>
    `).join('');
}

function showAddProductForm() {
    document.getElementById('add-product-form').style.display = 'block';
}

function hideAddProductForm() {
    document.getElementById('add-product-form').style.display = 'none';
    document.getElementById('newProductForm').reset();
}

document.getElementById('newProductForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const name = document.getElementById('product-name').value;
    const type = document.getElementById('product-type').value;
    const price = parseFloat(document.getElementById('product-price').value);
    const stock = parseInt(document.getElementById('product-stock').value);
    const image = document.getElementById('product-image').value || 'https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80';
    
    const newProduct = {
        id: products.length > 0 ? Math.max(...products.map(p => p.id)) + 1 : 1,
        name,
        type,
        price,
        stock,
        image,
        condition: 'Nieuw'
    };
    
    if (type === 'phone') {
        newProduct.brand = 'Merk';
    } else {
        newProduct.category = 'Accessoire';
    }
    
    products.push(newProduct);
    saveProducts();
    loadAdminProducts();
    hideAddProductForm();
    alert('Product toegevoegd!');
});

function deleteProduct(productId) {
    if (confirm('Weet je zeker dat je dit product wilt verwijderen?')) {
        products = products.filter(p => p.id !== productId);
        saveProducts();
        loadAdminProducts();
        alert('Product verwijderd!');
    }
}

// Initialize the page
document.addEventListener('DOMContentLoaded', function() {
    updateCartCount();
    loadFeaturedProducts();
    
    // Check if user is already logged in as admin
    if (currentUser && currentUser.role === 'admin') {
        showAdminPanel();
    }
});
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
